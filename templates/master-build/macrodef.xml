<project>
    <macrodef name="get-jetty-stop-port">
        <attribute name="port"/>
        <attribute name="result"/>
        <sequential>
            <script language="javascript">
                stopPort = 10000 + parseInt('@{port}');
                project.setProperty('@{result}', stopPort);
            </script>
        </sequential>
    </macrodef>

    <macrodef name="get-jetty-stop-key">
        <attribute name="host"/>
        <attribute name="port"/>
        <attribute name="result"/>
        <sequential>
            <script language="javascript">
                stopKey = 'stopkey-' + '@{host}' + '-' + '@{port}';
                project.setProperty('@{result}', stopKey);
            </script>
        </sequential>
    </macrodef>

    <macrodef name="sanitize-ports">
        <sequential>
            <java jar="${tools.port-corrector}" fork="true">
                <arg value="namesAndPorts.properties" />
            </java>
        </sequential>
    </macrodef>
</project>
